(this.webpackJsonptest=this.webpackJsonptest||[]).push([[10],{140:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(3),l=a(18),r=a(0),i=a.n(r),c=(a(140),a(39)),o=a(26),s=a(23),u=a(15),m=(a(42),/^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$/),d=function(e){var t=e.inputOnchangeValue,a=(e.formValues,e.existingvalue),n=e.label,c=Object(u.a)(e,["inputOnchangeValue","formValues","existingvalue","label"]),o=Object(r.useState)(null),d=Object(l.a)(o,2),p=d[0],g=d[1],b=new Date(a),E=isNaN(b.getDate())?"01":b.getDate()<10?"0".concat(b.getDate()):"".concat(b.getDate()),f=isNaN(b.getMonth())?"01":b.getMonth()+1<10?"0".concat(b.getMonth()+1):"".concat(b.getMonth()),h=isNaN(b.getFullYear())?"2020":b.getFullYear(),v="".concat(E,"/").concat(f,"/").concat(h),y=null!==p?p:isNaN(b.getDate())?"Veuillez saisir une date":v;return i.a.createElement("div",{className:"input-box"},i.a.createElement("label",{className:"label"},n),i.a.createElement("input",Object.assign({},c,{className:"input",value:y,onChange:function(e){g(e.target.value);var a="";if(m.test(e.target.value)){var n=e.target.value.split("/"),l=[n[1],n[0],n[2]].join("/");a=new Date(l).toISOString()}t(Object(s.a)({},c.name,a))}})))},p=a(12),g=Object(n.b)((function(e){return{formValues:e.formReducer}}),(function(e){return{inputOnchangeValue:function(t){e(Object(p.h)(t))}}}))(d),b=a(44),E=a(125),f=function(e){var t=e.label,a=e.type,n=e.options,l=e.formValues,r=e.existingvalue,c=void 0===r?[]:r,o=e.inputOnchangeValue,m=Object(u.a)(e,["label","type","options","formValues","existingvalue","inputOnchangeValue"]),d=void 0!==l[m.name]?l[m.name]:c.map((function(e){return e[0]}));return i.a.createElement("div",{className:"input-box",style:{height:"230px"}},i.a.createElement("label",{className:"label"},t),i.a.createElement("select",Object.assign({type:a,className:"input",value:d||[],style:{minHeight:"200px"},onChange:function(e){var t=Array.from(e.target.selectedOptions,(function(e){return+e.value}));o(Object(s.a)({},m.name,t))}},m),n.map((function(e){return i.a.createElement("option",{value:e.id,key:Object(E.a)()},e.label||e.name||"".concat(e.firstname," ").concat(e.lastname))}))))},h=Object(n.b)((function(e){return{formValues:e.formReducer}}),(function(e){return{inputOnchangeValue:function(t){e(Object(p.h)(t))}}}))(f),v=a(49),y=a(31),x=a(22),O=function(e){var t=e.data,a=void 0===t?{}:t,n=e.editions,l=e.tags,c=e.collections,s=e.usersAuthor,u=e.usersIllustrator,m=e.types,d=e.createOrModifyProduct,p=e.getIdFromObject;return Object(r.useEffect)((function(){void 0!==p&&p({id:a.id})}),[a.id,p]),i.a.createElement(y.a,{onSubmitEvent:d},i.a.createElement(o.a,{label:"Titre",name:"name",type:"text",existingvalue:a.name,placeholder:"Titre",pattern:"[\\w\\W]{1,50}",title:"Maximum 50 caract\xe8res",required:!0}),i.a.createElement(b.a,{label:"Edition",name:"id_edition",existingvalue:a.id_edition,options:n,required:!0}),i.a.createElement(b.a,{label:"Type de produit",name:"id_type",existingvalue:a.id_type,options:m,required:!0}),i.a.createElement(h,{label:"Auteur",name:"author",options:s,existingvalue:a.writer,multiple:!0}),i.a.createElement(h,{label:"Illustrateur",name:"illustrator",options:u,existingvalue:a.illustrator,multiple:!0}),i.a.createElement(o.a,{label:"Prix",name:"price",type:"number",existingvalue:a.price,placeholder:"Prix",pattern:"[\\d\\.,]{1,}",title:"Un prix valide en chiffres",required:!0}),i.a.createElement(o.a,{label:"Nom copyright",name:"copyright_photo",type:"text",existingvalue:a.copyright_photo,placeholder:"Nom copyright"}),i.a.createElement(o.a,{label:"ISBN",name:"isbn",type:"text",existingvalue:a.isbn,placeholder:"ISBN"}),i.a.createElement(o.a,{label:"Copyright",name:"copyright",type:"text",existingvalue:a.copyright,placeholder:"Copyright"}),i.a.createElement(o.a,{label:"Taille",name:"size",type:"text",existingvalue:a.size,placeholder:"Taille du livre en A x B cm",required:!0}),i.a.createElement(o.a,{label:"Poids",name:"weight",type:"number",existingvalue:a.weight,placeholder:"Poids du livre en kilogrammes",required:!0}),i.a.createElement(o.a,{label:"Pages",name:"pages",type:"number",existingvalue:a.pages,placeholder:"Nombre de pages",pattern:"[\\d]{1,}",title:"Pas de caract\xe8res sp\xe9ciaux, un nombre de pages en chiffres",required:!0}),i.a.createElement(o.a,{label:"EAN",name:"ean",type:"text",existingvalue:a.ean,placeholder:"EAN"}),i.a.createElement(g,{label:"Parution",name:"release_date",type:"text",placeholder:"Date de parution",pattern:"^([0-2][0-9]|(3)[0-1])(\\/)(((0)[0-9])|((1)[0-2]))(\\/)\\d{4}$",title:"Une date valide jj/mm/aaaa, s\xe9par\xe9 par des /",existingvalue:a.release_date}),i.a.createElement(o.a,{label:"Stock",name:"stock_quantity",type:"number",existingvalue:a.stock_quantity,placeholder:"Stock",pattern:"[\\d\\.,]{1,}",title:"Un stock en chiffres",required:!0}),i.a.createElement(b.a,{label:"Collection",name:"id_collection",existingvalue:a.id_collection,options:c}),i.a.createElement(h,{label:"Tags",name:"tag",options:l,existingvalue:a.tag,multiple:!0}),i.a.createElement(o.a,{label:"Kindle",name:"url_kindle",type:"text",existingvalue:a.url_kindle,placeholder:"url du lien Kindle"}),i.a.createElement(o.a,{label:"Booknode",name:"url_booknode",type:"text",existingvalue:a.url_booknode,placeholder:"url du lien Booknode"}),i.a.createElement(v.a,{label:"R\xe9sum\xe9",name:"synopsys",existingvalue:a.synopsys,pattern:".{20,}",title:"Minimum 20 charact\xe8res de long",required:!0}),i.a.createElement(v.a,{label:"Extrait",name:"excerpt",existingvalue:a.excerpt,pattern:".{20,}",title:"Minimum 20 charact\xe8res de long"}),i.a.createElement(x.a,{type:"submit"},"Enregistrer"))},N=a(7),j=function(e){var t=e.product,a=e.eraseFormState,n=e.getIdFromObject,l=e.deleteProduct,r=e.openModal,c=e.setModalContent,o=e.editions,s=e.tags,u=e.collections,m=e.usersAuthor,d=e.usersIllustrator,p=e.types,g=e.createOrModifyProduct;return i.a.createElement("div",{className:"product-list-item"},i.a.createElement("div",{className:"product-list-item_img",style:{background:"url(https://loupargent-oclock.fr/img/".concat(t.picture_file[0],")"),backgroundSize:"cover"}}),i.a.createElement("h1",{className:"product-list-item_title"},t.name),i.a.createElement("span",{className:"product-list-item_delete",onClick:function(){a(),n({id:t.id}),window.confirm("Vous vous en savoir plus ?")&&l()}},i.a.createElement(N.a,{icon:"trash-alt"})),i.a.createElement("div",{className:"product-list-item_description"},i.a.createElement(N.a,{icon:"quote-left"}),t.synopsys.slice(0,100),"...",i.a.createElement(N.a,{icon:"quote-right"})),i.a.createElement("div",{className:"product-list-item_infos"},i.a.createElement("span",null,"N\xb0",t.id),i.a.createElement("span",null,t.price,"\u20ac"),i.a.createElement("span",null,t.pages," pages")),i.a.createElement("div",{className:"product-list-item_infos"},i.a.createElement("span",null,t.weight,"kg"),i.a.createElement("span",null,"stock : ",t.stock_quantity),i.a.createElement("span",null,t.type_name)),i.a.createElement("div",{className:"product-list-item_modifications"},i.a.createElement("button",{onClick:function(){r(),c(i.a.createElement(j,{id:t.id}))}},i.a.createElement(N.a,{style:{margin:"0 0.5rem"},icon:"file-image"}),"Photos"),i.a.createElement("button",{onClick:function(){r(),c(i.a.createElement(O,{data:t,editions:o,tags:s,collections:u,usersAuthor:m,usersIllustrator:d,types:p,createOrModifyProduct:g,getIdFromObject:n}))}},i.a.createElement(N.a,{icon:"pen"}),"Modifier")),i.a.createElement("div",{className:"product-list-item_diverse"},i.a.createElement("span",null,"Edition : ",t.edition_name),i.a.createElement("span",null,"Collection : ",t.collection_name),i.a.createElement("span",null,"Copyright : ",t.copyright),i.a.createElement("span",null,"EAN : ",t.ean),i.a.createElement("span",null,"ISBN : ",t.isbn),i.a.createElement("span",null,"Taille : ",t.size),i.a.createElement("span",null,"Date de parution : ",function(e){var t=new Date(e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear())}(t.release_date))))},_=function(e){var t=e.fetchAllAdminProducts,a=e.products,n=e.editions,o=e.tags,s=e.collections,u=e.users,m=e.types,d=e.createOrModifyProduct,p=e.getIdFromObject,g=e.eraseFormState,b=e.deleteProduct,E=Object(r.useState)(!1),f=Object(l.a)(E,2),h=f[0],v=f[1],y=Object(r.useState)(null),x=Object(l.a)(y,2),N=x[0],_=x[1];Object(r.useEffect)((function(){t()}),[t]);var k=function(){return v(!0)},P=function(){return v(!1)},M=u.filter((function(e){return"Editeur"===e.role||"Auteur"===e.role})),A=u.filter((function(e){return"Editeur"===e.role||"Illustrateur"===e.role}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{show:h,onCancel:P,style:{textAlign:"center"},button:i.a.createElement("button",{onClick:P,style:{backgroundColor:"red"}},"fermer"),content:N}),i.a.createElement("div",{className:"product-list-box"},i.a.createElement("div",{className:"admin-title"},i.a.createElement("h2",null,"Produits"),i.a.createElement("button",{onClick:function(){k(),_(i.a.createElement(O,{editions:n,tags:o,collections:s,usersAuthor:M,usersIllustrator:A,types:m,createOrModifyProduct:d}))}},"Ajouter un produit")),0===a.length?i.a.createElement("p",null,"Rien \xe0 afficher pour l'instant."):null,i.a.createElement("div",{className:"product-list-container"},a.map((function(e){return i.a.createElement(j,{product:e,eraseFormState:g,getIdFromObject:p,deleteProduct:b,openModal:k,setModalContent:_,editions:n,tags:o,collections:s,usersAuthor:M,usersIllustrator:A,types:m,createOrModifyProduct:d,key:e.id})})))))},k=a(20);t.default=Object(n.b)((function(e){return{products:e.listProductsReducer.products,editions:e.listProductsReducer.editions,tags:e.listProductsReducer.tags,collections:e.listProductsReducer.collections,users:e.listProductsReducer.users,types:e.listProductsReducer.types}}),(function(e){return{fetchAllAdminProducts:function(){e(Object(k.i)())},createOrModifyProduct:function(){e(Object(k.g)())},getIdFromObject:function(t){e(Object(p.f)(t))},eraseFormState:function(){e(Object(p.e)())},deleteProduct:function(){e(Object(k.h)())}}}))(_)}}]);
//# sourceMappingURL=10.6c66f994.chunk.js.map