(this.webpackJsonptest=this.webpackJsonptest||[]).push([[4],{129:function(e,t,a){},130:function(e,t,a){"use strict";var n=a(15),l=a(0),r=a.n(l),i=a(3),c=a.n(i),o=a(9),s=a(23);t.a=function(e){var t=e.id,a=e.reloadData,i=Object(l.useState)({}),u=Object(n.a)(i,2),m=u[0],d=u[1];return r.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault(),function(){o.b.warning("Images en cours de t\xe9l\xe9chargement");for(var e=new FormData,n=0;n<m.length;n++)e.append("picture_file",m[n]);c()({method:"PUT",url:"https://loupargent-oclock.fr/api/admin/products/".concat(t),data:e}).then((function(){o.b.info("Les images ont \xe9t\xe9 enregistr\xe9"),a()})).catch((function(e){console.log(e),o.b.error("Une erreur est survenue : ".concat(e))}))}()}},r.a.createElement("div",{className:"input-box"},r.a.createElement("label",{className:"label"},"Image Avatar"),r.a.createElement("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",name:"picture_file",className:"input",multiple:!0,onChange:function(e){d(e.target.files)}})),r.a.createElement(s.a,{type:"submit"},"envoyer"))}},131:function(e,t,a){"use strict";var n=a(4),l=a(26),r=a(15),i=a(17),c=a(0),o=a.n(c),s=(a(44),/^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$/),u=function(e){var t=e.inputOnchangeValue,a=(e.formValues,e.existingvalue),n=e.label,u=Object(i.a)(e,["inputOnchangeValue","formValues","existingvalue","label"]),m=Object(c.useState)(null),d=Object(r.a)(m,2),p=d[0],g=d[1],f=new Date(a),b=isNaN(f.getDate())?"01":f.getDate()<10?"0".concat(f.getDate()):"".concat(f.getDate()),E=isNaN(f.getMonth())?"01":f.getMonth()+1<10?"0".concat(f.getMonth()+1):"".concat(f.getMonth()),v=isNaN(f.getFullYear())?"2020":f.getFullYear(),h="".concat(b,"/").concat(E,"/").concat(v),y=null!==p?p:isNaN(f.getDate())?"Veuillez saisir une date":h;return o.a.createElement("div",{className:"input-box"},o.a.createElement("label",{className:"label"},n),o.a.createElement("input",Object.assign({},u,{className:"input",value:y,onChange:function(e){g(e.target.value);var a="";if(s.test(e.target.value)){var n=e.target.value.split("/"),r=[n[1],n[0],n[2]].join("/");a=new Date(r).toISOString()}t(Object(l.a)({},u.name,a))}})))},m=a(13);t.a=Object(n.b)((function(e){return{formValues:e.formReducer}}),(function(e){return{inputOnchangeValue:function(t){e(Object(m.h)(t))}}}))(u)},132:function(e,t,a){"use strict";var n=a(4),l=a(26),r=a(17),i=a(0),c=a.n(i),o=a(127),s=(a(44),function(e){var t=e.label,a=e.type,n=e.options,i=e.formValues,s=e.existingvalue,u=void 0===s?[]:s,m=e.inputOnchangeValue,d=Object(r.a)(e,["label","type","options","formValues","existingvalue","inputOnchangeValue"]),p=void 0!==i[d.name]?i[d.name]:u.map((function(e){return e[0]}));return c.a.createElement("div",{className:"input-box",style:{height:"230px"}},c.a.createElement("label",{className:"label"},t),c.a.createElement("select",Object.assign({type:a,className:"input",value:p||[],style:{minHeight:"200px"},onChange:function(e){var t=Array.from(e.target.selectedOptions,(function(e){return+e.value}));m(Object(l.a)({},d.name,t))}},d),n.map((function(e){return c.a.createElement("option",{value:e.id,key:Object(o.a)()},e.label||e.name||"".concat(e.firstname," ").concat(e.lastname))}))))}),u=a(13);t.a=Object(n.b)((function(e){return{formValues:e.formReducer}}),(function(e){return{inputOnchangeValue:function(t){e(Object(u.h)(t))}}}))(s)},157:function(e,t,a){"use strict";a.r(t);var n=a(4),l=a(15),r=a(0),i=a.n(r),c=(a(129),a(36)),o=a(21),s=a(131),u=a(46),m=a(132),d=a(50),p=a(25),g=a(23),f=function(e){var t=e.data,a=void 0===t?{}:t,n=e.editions,l=e.tags,c=e.collections,f=e.usersAuthor,b=e.usersIllustrator,E=e.types,v=e.createOrModifyBook,h=e.getIdFromObject;return Object(r.useEffect)((function(){void 0!==h&&h({id:a.id})}),[a.id,h]),i.a.createElement(p.a,{onSubmitEvent:v},i.a.createElement(o.a,{label:"Titre",name:"name",type:"text",existingvalue:a.name,placeholder:"Titre",pattern:"[\\w\\W]{1,50}",title:"Maximum 50 caract\xe8res",required:!0}),i.a.createElement(u.a,{label:"Edition",name:"id_edition",existingvalue:a.id_edition,options:n,required:!0}),i.a.createElement(u.a,{label:"Type de produit",name:"id_type",existingvalue:a.id_type,options:E,required:!0}),i.a.createElement(m.a,{label:"Auteur",name:"author",options:f,existingvalue:a.writer,multiple:!0}),i.a.createElement(m.a,{label:"Illustrateur",name:"illustrator",options:b,existingvalue:a.illustrator,multiple:!0}),i.a.createElement(o.a,{label:"Prix",name:"price",type:"number",existingvalue:a.price,placeholder:"Prix",pattern:"[\\d\\.,]{1,}",title:"Un prix valide en chiffres",required:!0}),i.a.createElement(o.a,{label:"Nom copyright",name:"copyright_photo",type:"text",existingvalue:a.copyright_photo,placeholder:"Nom copyright"}),i.a.createElement(o.a,{label:"ISBN",name:"isbn",type:"text",existingvalue:a.isbn,placeholder:"ISBN"}),i.a.createElement(o.a,{label:"Copyright",name:"copyright",type:"text",existingvalue:a.copyright,placeholder:"Copyright"}),i.a.createElement(o.a,{label:"Taille",name:"size",type:"text",existingvalue:a.size,placeholder:"Taille du livre en A x B cm",required:!0}),i.a.createElement(o.a,{label:"Poids",name:"weight",type:"number",existingvalue:a.weight,placeholder:"Poids du livre en kilogrammes",required:!0}),i.a.createElement(o.a,{label:"Pages",name:"pages",type:"number",existingvalue:a.pages,placeholder:"Nombre de pages",pattern:"[\\d]{1,}",title:"Pas de caract\xe8res sp\xe9ciaux, un nombre de pages en chiffres",required:!0}),i.a.createElement(o.a,{label:"EAN",name:"ean",type:"text",existingvalue:a.ean,placeholder:"EAN"}),i.a.createElement(s.a,{label:"Parution",name:"release_date",type:"text",placeholder:"Date de parution",pattern:"^([0-2][0-9]|(3)[0-1])(\\/)(((0)[0-9])|((1)[0-2]))(\\/)\\d{4}$",title:"Une date valide jj/mm/aaaa, s\xe9par\xe9 par des /",existingvalue:a.release_date}),i.a.createElement(o.a,{label:"Stock",name:"stock_quantity",type:"number",existingvalue:a.stock_quantity,placeholder:"Stock",pattern:"[\\d\\.,]{1,}",title:"Un stock en chiffres",required:!0}),i.a.createElement(u.a,{label:"Collection",name:"id_collection",existingvalue:a.id_collection,options:c}),i.a.createElement(m.a,{label:"Tags",name:"tag",options:l,existingvalue:a.tag,multiple:!0}),i.a.createElement(o.a,{label:"Kindle",name:"url_kindle",type:"text",existingvalue:a.url_kindle,placeholder:"url du lien Kindle"}),i.a.createElement(o.a,{label:"Booknode",name:"url_booknode",type:"text",existingvalue:a.url_booknode,placeholder:"url du lien Booknode"}),i.a.createElement(d.a,{label:"R\xe9sum\xe9",name:"synopsys",existingvalue:a.synopsys,pattern:".{20,}",title:"Minimum 20 charact\xe8res de long",required:!0}),i.a.createElement(d.a,{label:"Extrait",name:"excerpt",existingvalue:a.excerpt,pattern:".{20,}",title:"Minimum 20 charact\xe8res de long"}),i.a.createElement(g.a,{type:"submit"},"Enregistrer"))},b=a(5),E=a(130),v=function(e){var t=e.product,a=e.eraseFormState,n=e.getIdFromObject,l=e.deleteBook,r=e.openModal,c=e.setModalContent,o=e.editions,s=e.tags,u=e.collections,m=e.usersAuthor,d=e.usersIllustrator,p=e.types,g=e.createOrModifyBook,v=e.fetchAllAdminBooks;return i.a.createElement("div",{className:"product-list-item"},i.a.createElement("div",{className:"product-list-item_img",style:{background:"url(https://loupargent-oclock.fr/img/".concat(t.picture_file[0],")"),backgroundSize:"cover"}}),i.a.createElement("h1",{className:"product-list-item_title"},t.name),i.a.createElement("span",{className:"product-list-item_delete",onClick:function(){a(),n({id:t.id}),window.confirm("Etes vous s\xfbr de vouloir supprimer ce livre ?")&&l()}},i.a.createElement(b.a,{icon:"trash-alt"})),i.a.createElement("div",{className:"product-list-item_description"},i.a.createElement(b.a,{icon:"quote-left"}),t.synopsys.slice(0,100),"...",i.a.createElement(b.a,{icon:"quote-right"})),i.a.createElement("div",{className:"product-list-item_infos"},i.a.createElement("span",null,"N\xb0",t.id),i.a.createElement("span",null,t.price,"\u20ac"),i.a.createElement("span",null,t.pages," pages")),i.a.createElement("div",{className:"product-list-item_infos"},i.a.createElement("span",null,t.weight,"kg"),i.a.createElement("span",null,"stock : ",t.stock_quantity),i.a.createElement("span",null,t.type_name)),i.a.createElement("div",{className:"product-list-item_modifications"},i.a.createElement("button",{onClick:function(){r(),c(i.a.createElement(E.a,{id:t.id,reloadData:v}))}},i.a.createElement(b.a,{style:{margin:"0 0.5rem"},icon:"file-image"}),"Photos"),i.a.createElement("button",{onClick:function(){r(),c(i.a.createElement(f,{data:t,editions:o,tags:s,collections:u,usersAuthor:m,usersIllustrator:d,types:p,createOrModifyBook:g,getIdFromObject:n}))}},i.a.createElement(b.a,{icon:"pen"}),"Modifier")),i.a.createElement("div",{className:"product-list-item_diverse"},i.a.createElement("span",null,"Edition : ",t.edition_name),i.a.createElement("span",null,"Collection : ",t.collection_name),i.a.createElement("span",null,"Copyright : ",t.copyright),i.a.createElement("span",null,"EAN : ",t.ean),i.a.createElement("span",null,"ISBN : ",t.isbn),i.a.createElement("span",null,"Taille : ",t.size),i.a.createElement("span",null,"Date de parution : ",function(e){var t=new Date(e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear())}(t.release_date))))},h=function(e){var t=e.fetchAllAdminBooks,a=e.products,n=e.editions,o=e.tags,s=e.collections,u=e.users,m=e.types,d=e.createOrModifyBook,p=e.getIdFromObject,g=e.eraseFormState,b=e.deleteBook,E=Object(r.useState)(!1),h=Object(l.a)(E,2),y=h[0],x=h[1],O=Object(r.useState)(null),k=Object(l.a)(O,2),N=k[0],j=k[1];Object(r.useEffect)((function(){t()}),[t]);var _=function(){return x(!0)},A=function(){return x(!1)},B=u.filter((function(e){return"Editeur"===e.role||"Auteur"===e.role})),M=u.filter((function(e){return"Editeur"===e.role||"Illustrateur"===e.role}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{show:y,onCancel:A,style:{textAlign:"center"},button:i.a.createElement("button",{onClick:A,style:{backgroundColor:"red"}},"fermer"),content:N}),i.a.createElement("div",{className:"product-list-box"},i.a.createElement("div",{className:"admin-title"},i.a.createElement("h2",null,"Livres"),i.a.createElement("button",{onClick:function(){_(),j(i.a.createElement(f,{editions:n,tags:o,collections:s,usersAuthor:B,usersIllustrator:M,types:m,createOrModifyBook:d}))}},"Ajouter un livre")),0===a.length?i.a.createElement("p",null,"Rien \xe0 afficher pour l'instant."):null,i.a.createElement("div",{className:"product-list-container"},a.map((function(e){return i.a.createElement(v,{product:e,eraseFormState:g,getIdFromObject:p,deleteBook:b,openModal:_,setModalContent:j,editions:n,tags:o,collections:s,usersAuthor:B,usersIllustrator:M,types:m,createOrModifyBook:d,fetchAllAdminBooks:t,key:e.id})})))))},y=a(12),x=a(13);t.default=Object(n.b)((function(e){return{products:e.listProductsReducer.products,editions:e.listProductsReducer.editions,tags:e.listProductsReducer.tags,collections:e.listProductsReducer.collections,users:e.listProductsReducer.users,types:e.listProductsReducer.types}}),(function(e){return{fetchAllAdminBooks:function(){e(Object(y.o)())},createOrModifyBook:function(){e(Object(y.k)())},getIdFromObject:function(t){e(Object(x.f)(t))},eraseFormState:function(){e(Object(x.e)())},deleteBook:function(){e(Object(y.m)())}}}))(h)}}]);
//# sourceMappingURL=4.9ddbe964.chunk.js.map