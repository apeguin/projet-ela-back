(this.webpackJsonptest=this.webpackJsonptest||[]).push([[5],{125:function(e,t,a){},126:function(e,t,a){"use strict";var n=a(15),r=a(0),l=a.n(r),c=a(3),i=a.n(c),o=a(8),s=a(23);t.a=function(e){var t=e.id,a=e.reloadData,c=Object(r.useState)({}),u=Object(n.a)(c,2),m=u[0],d=u[1];return l.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault(),function(){o.b.warning("Images en cours de t\xe9l\xe9chargement");for(var e=new FormData,n=0;n<m.length;n++)e.append("picture_file",m[n]);i()({method:"PUT",url:"https://loupargent-oclock.fr/api/admin/products/".concat(t),data:e}).then((function(){o.b.info("Les images ont \xe9t\xe9 enregistr\xe9"),a()})).catch((function(e){console.log(e),o.b.error("Une erreur est survenue : ".concat(e))}))}()}},l.a.createElement("div",{className:"input-box"},l.a.createElement("label",{className:"label"},"Image Avatar"),l.a.createElement("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",name:"picture_file",className:"input",multiple:!0,onChange:function(e){d(e.target.files)}})),l.a.createElement(s.a,{type:"submit"},"envoyer"))}},127:function(e,t,a){"use strict";var n=a(4),r=a(26),l=a(15),c=a(17),i=a(0),o=a.n(i),s=(a(40),/^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$/),u=function(e){var t=e.inputOnchangeValue,a=(e.formValues,e.existingvalue),n=e.label,u=Object(c.a)(e,["inputOnchangeValue","formValues","existingvalue","label"]),m=Object(i.useState)(null),d=Object(l.a)(m,2),p=d[0],f=d[1],g=new Date(a),b=isNaN(g.getDate())?"01":g.getDate()<10?"0".concat(g.getDate()):"".concat(g.getDate()),v=isNaN(g.getMonth())?"01":g.getMonth()+1<10?"0".concat(g.getMonth()+1):"".concat(g.getMonth()),E=isNaN(g.getFullYear())?"2020":g.getFullYear(),h="".concat(b,"/").concat(v,"/").concat(E),y=null!==p?p:isNaN(g.getDate())?"Veuillez saisir une date":h;return o.a.createElement("div",{className:"input-box"},o.a.createElement("label",{className:"label"},n),o.a.createElement("input",Object.assign({},u,{className:"input",value:y,onChange:function(e){f(e.target.value);var a="";if(s.test(e.target.value)){var n=e.target.value.split("/"),l=[n[1],n[0],n[2]].join("/");a=new Date(l).toISOString()}t(Object(r.a)({},u.name,a))}})))},m=a(13);t.a=Object(n.b)((function(e){return{formValues:e.formReducer}}),(function(e){return{inputOnchangeValue:function(t){e(Object(m.h)(t))}}}))(u)},128:function(e,t,a){"use strict";var n=a(4),r=a(26),l=a(17),c=a(0),i=a.n(c),o=a(123),s=(a(40),function(e){var t=e.label,a=e.type,n=e.options,c=e.formValues,s=e.existingvalue,u=void 0===s?[]:s,m=e.inputOnchangeValue,d=Object(l.a)(e,["label","type","options","formValues","existingvalue","inputOnchangeValue"]),p=void 0!==c[d.name]?c[d.name]:u.map((function(e){return e[0]}));return i.a.createElement("div",{className:"input-box",style:{height:"230px"}},i.a.createElement("label",{className:"label"},t),i.a.createElement("select",Object.assign({type:a,className:"input",value:p||[],style:{minHeight:"200px"},onChange:function(e){var t=Array.from(e.target.selectedOptions,(function(e){return+e.value}));m(Object(r.a)({},d.name,t))}},d),n.map((function(e){return i.a.createElement("option",{value:e.id,key:Object(o.a)()},e.label||e.name||"".concat(e.firstname," ").concat(e.lastname))}))))}),u=a(13);t.a=Object(n.b)((function(e){return{formValues:e.formReducer}}),(function(e){return{inputOnchangeValue:function(t){e(Object(u.h)(t))}}}))(s)},155:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a(15),l=a(0),c=a.n(l),i=(a(125),a(36)),o=a(27),s=a(6),u=a(21),m=a(127),d=a(42),p=a(128),f=a(46),g=a(25),b=a(23),v=function(e){var t=e.data,a=void 0===t?{}:t,n=e.collections,r=e.usersIllustrator,i=e.types,o=e.createOrModifyProduct,s=e.getIdFromObject;return Object(l.useEffect)((function(){void 0!==s&&s({id:a.id})}),[a.id,s]),c.a.createElement(g.a,{onSubmitEvent:o},c.a.createElement(u.a,{label:"Titre",name:"name",type:"text",existingvalue:a.name,placeholder:"Titre",pattern:"[\\w\\W]{1,50}",title:"Maximum 50 caract\xe8res",required:!0}),c.a.createElement(d.a,{label:"Type de produit",name:"id_type",existingvalue:a.id_type,options:i,required:!0}),c.a.createElement(u.a,{label:"Prix",name:"price",type:"number",existingvalue:a.price,placeholder:"Prix",pattern:"[\\d\\.,]{1,}",title:"Un prix valide en chiffres",required:!0}),c.a.createElement(u.a,{label:"Stock",name:"stock_quantity",type:"number",existingvalue:a.stock_quantity,placeholder:"Stock",pattern:"[\\d\\.,]{1,}",title:"Un stock en chiffres",required:!0}),c.a.createElement(u.a,{label:"Taille",name:"size",type:"text",existingvalue:a.size,placeholder:"Taille du livre en A x B cm",required:!0}),c.a.createElement(m.a,{label:"Parution",name:"release_date",type:"text",placeholder:"Date de parution",pattern:"^([0-2][0-9]|(3)[0-1])(\\/)(((0)[0-9])|((1)[0-2]))(\\/)\\d{4}$",title:"Une date valide jj/mm/aaaa, s\xe9par\xe9 par des /",existingvalue:a.release_date}),c.a.createElement(p.a,{label:"Illustrateur",name:"illustrator",options:r,existingvalue:a.illustrator,multiple:!0}),c.a.createElement(d.a,{label:"Collection",name:"id_collection",existingvalue:a.id_collection,options:n}),c.a.createElement(f.a,{label:"R\xe9sum\xe9",name:"synopsys",existingvalue:a.synopsys,pattern:".{20,}",title:"Minimum 20 charact\xe8res de long",required:!0}),c.a.createElement(b.a,{type:"submit"},"Enregistrer"))},E=a(126),h=function(e){var t=e.item,a=e.eraseFormState,n=e.getIdFromObject,r=e.deleteProduct,l=e.openModal,i=e.setModalContent,o=e.collections,u=e.usersIllustrator,m=e.types,d=e.createOrModifyProduct,p=e.fetchAllAdminProducts;return c.a.createElement("div",{className:"product-list-item"},c.a.createElement("div",{className:"product-list-item_img",style:{backgroundSize:"cover"}},c.a.createElement("img",{src:"https://loupargent-oclock.fr/img/".concat(t.picture_file[0]),alt:""})),c.a.createElement("h1",{className:"product-list-item_title"},t.name),c.a.createElement("span",{className:"product-list-item_delete",onClick:function(){a(),n({id:t.id}),window.confirm("Etes vous s\xfbr de vouloir supprimer ce produit ?")&&r()}},c.a.createElement(s.a,{icon:"trash-alt"})),c.a.createElement("div",{className:"product-list-item_description"},"Description : ",t.synopsys.slice(0,50)),c.a.createElement("div",{className:"product-list-item_infos"},c.a.createElement("span",null,"N\xb0",t.id),c.a.createElement("span",null,t.price,"\u20ac"),c.a.createElement("span",null,"stock : ",t.stock_quantity)),c.a.createElement("div",{className:"product-list-item_infos"},c.a.createElement("span",null,t.type_name)),c.a.createElement("div",{className:"product-list-item_diverse"},c.a.createElement("span",null,"Collection : ",t.collection_name),c.a.createElement("span",null,"Taille : ",t.size),c.a.createElement("span",null,"Date de parution : ",function(e){var t=new Date(e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear())}(t.release_date))),c.a.createElement("div",{className:"product-list-item_modifications"},c.a.createElement("button",{onClick:function(){l(),i(c.a.createElement(E.a,{id:t.id,reloadData:p}))}},c.a.createElement(s.a,{style:{margin:"0 0.5rem"},icon:"file-image"}),"Photo"),c.a.createElement("button",{onClick:function(){l(),i(c.a.createElement(v,{data:t,collections:o,usersIllustrator:u,types:m,createOrModifyProduct:d,getIdFromObject:n}))}},c.a.createElement(s.a,{icon:"pen"}),"Modifier")))},y=function(e){var t=e.fetchAllAdminProducts,a=e.products,n=e.collections,s=e.users,u=e.types,m=e.createOrModifyProduct,d=e.getIdFromObject,p=e.eraseFormState,f=e.deleteProduct,g=Object(l.useState)(!1),b=Object(r.a)(g,2),E=b[0],y=b[1],O=Object(l.useState)(null),j=Object(r.a)(O,2),N=j[0],x=j[1];Object(l.useEffect)((function(){t()}),[t]);var P=function(){return y(!0)},_=function(){return y(!1)},k=s.filter((function(e){return"Editeur"===e.role||"Illustrateur"===e.role}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{show:E,onCancel:_,style:{textAlign:"center"},button:c.a.createElement("button",{onClick:_,style:{backgroundColor:"red"}},"fermer"),content:N}),c.a.createElement("div",{className:"product-list-box"},c.a.createElement("div",{className:"admin-title"},c.a.createElement("h2",null,"Produits"),c.a.createElement("button",{onClick:function(){P(),x(c.a.createElement(v,{collections:n,usersIllustrator:k,types:u,createOrModifyProduct:m}))}},"Ajouter un produit")),0===a.length?c.a.createElement("p",null,"Rien \xe0 afficher pour l'instant."):null,c.a.createElement("div",{className:"product-list-container"},c.a.createElement(o.a,{data:a,Component:h,eraseFormState:p,getIdFromObject:d,deleteProduct:f,openModal:P,setModalContent:x,collections:n,usersIllustrator:k,types:u,createOrModifyProduct:m,fetchAllAdminProducts:t}))))},O=a(12),j=a(13);t.default=Object(n.b)((function(e){return{products:e.listProductsReducer.products,editions:e.listProductsReducer.editions,tags:e.listProductsReducer.tags,collections:e.listProductsReducer.collections,users:e.listProductsReducer.users,types:e.listProductsReducer.types}}),(function(e){return{fetchAllAdminProducts:function(){e(Object(O.q)())},createOrModifyProduct:function(){e(Object(O.l)())},getIdFromObject:function(t){e(Object(j.f)(t))},eraseFormState:function(){e(Object(j.e)())},deleteProduct:function(){e(Object(O.n)())}}}))(y)}}]);
//# sourceMappingURL=5.a0eecc68.chunk.js.map